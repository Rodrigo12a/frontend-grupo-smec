<app-spinner *ngIf="loading"></app-spinner>
<main class="d-flex">
  <!-- Sidebar como elemento fijo -->
  <app-sidebar></app-sidebar>

  <!-- Contenido principal -->
  <div *ngIf="!loading" class="container-fluid flex-grow-1" style="margin-left: 280px;">
    <div class="row">
      <div class="col-12 px-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2 mb-0" style="color: var(--color-primary);">Usuarios</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <button type="submit"
            (click)="navigateToRegister()"
            class="btn btn-primary">
              <i class="bi bi-save me-2" ></i>Ingresar un nuevo usuario
            </button>
          </div>
        </div>

        <div class="table-responsive">
          <table *ngIf="listUsuarios.length > 0" class="table table-striped table-hover table-custom">
            <thead>
              <tr class="table-primary">
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Apellidos</th>
                <th>Sexo</th>
                <th>Email</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of listUsuarios">
                <td>
                  <img
                    [src]="item.imagen_usuario || (item.sexo_usuario === 0 ?
                    'assets/images/avatars/avatar-02.svg' :
                    'assets/images/avatars/avatar-01.svg')"
                    alt="Avatar de usuario"
                    class="avatar-img"
                    style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;"
                  />
                </td>
                <td>{{item.nombre_usuario}}</td>
                <td>{{item.ap_usuario}}</td>
                <td>{{item.sexo_usuario === 0 ? 'Femenino' : 'Masculino'}}</td>
                <td>{{item.email_usuario}}</td>
                <td>{{item.estatus_usuario}}</td>
                <td>
                  <button (click)="updateUser(item.id_usuario!)" type="button" class="btn btn-secondary btn-xs ">Editar</button>
                  <button (click)="deleteUser(item.id_usuario!)" type="button" class="btn btn-primary  btn-xs">Eliminar</button>
                </td>
              </tr>
            </tbody>
          </table>
          <h2 *ngIf="listUsuarios.length == 0">No hay Usuarios</h2>
        </div>

      </div>
    </div>
  </div>
</main>
